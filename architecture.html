

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kvasir’s Architecture &mdash; Kvasir 0.0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Kvasir 0.0.1 documentation" href="index.html"/>
        <link rel="next" title="The Front End: ReactJS and Redux" href="frontend.html"/>
        <link rel="prev" title="Welcome to Kvasir’s documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Kvasir
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Kvasir&#8217;s Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-brief-history">A Brief History</a></li>
<li class="toctree-l2"><a class="reference internal" href="#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-host-kvasir">How to Host Kvasir</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="frontend.html">The Front End: ReactJS and Redux</a></li>
<li class="toctree-l1"><a class="reference internal" href="backend.html">The Back-End: NodeJS and ExpressJS</a></li>
<li class="toctree-l1"><a class="reference internal" href="middleware.html">The Middleware: Whatever Language You Want</a></li>
<li class="toctree-l1"><a class="reference internal" href="usecases.html">Kvasir Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing Kvasir</a></li>
<li class="toctree-l1"><a class="reference internal" href="herokudeploy.html">Deploying to Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="googleappengine.html">Deploying to Google App Engine</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Kvasir</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Kvasir&#8217;s Architecture</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/architecture.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kvasir-s-architecture">
<span id="kvasirarch"></span><h1>Kvasir&#8217;s Architecture<a class="headerlink" href="#kvasir-s-architecture" title="Permalink to this headline">¶</a></h1>
<p>This page details Kvasir&#8217;s architecture.  We do this so that you have a better idea for why certain decisions are made in the <a class="reference internal" href="backend.html#kvasirbackend"><span>back-end</span></a> and <a class="reference internal" href="frontend.html#kvasirfrontend"><span>front-end</span></a>.</p>
<div class="section" id="a-brief-history">
<h2>A Brief History<a class="headerlink" href="#a-brief-history" title="Permalink to this headline">¶</a></h2>
<p>Originally when the specifications for the project were laid out, it appeared as though Kvasir could be a single page app (SPA).
By using a framework/library such as AngularJS or ReactJS, we could provide a SPA that people could place onto a simple static web server.  The SPA would have all of the hookups to the WePay API and be able to make all required calls from JavaScript.</p>
<p>While it sounded nice in theory, we quickly realized it was not so nice in practice.  There were two major considerations that prevented us from building a complete SPA - security and data access.</p>
<p>On the security side, many of the WePay API calls that we need to make required a merchant&#8217;s access token.  Exposing that access token to the front-end browser is not inherently in-secure, but there were too many, &#8220;Well what happens if...&#8221; questions for us to fell comfortable exposing access tokens in their raw form to the browser.  Without these access tokens, we can&#8217;t make many calls to the WePay API directly from the browser.</p>
<p>While exposing access tokens to the front-end was considered a deal breaker, being able to get tokens to the front-end in the first place was also a challenge.  No two database configurations are the same, and we wanted this solution to be available to any company that currently integrates with WePay.  Normally, data makes up the fundamental building block of a web-application, but here we were presented with the unusual problem of having absolutely no control over the underlying database.  Not only that, but many databases would likely not be optimized for use with Kvasir, so we could make no assumptions about how certain pieces of data were connected or about the presence of data.</p>
<dl class="docutils">
<dt>A SPA with no attached back-end fell of the table pretty quickly, but we wanted to try and hold on to many of the benefits that come with a SPA such as:</dt>
<dd><ol class="first last arabic simple">
<li><strong>Being back-end agnostic</strong>.  Someone could simply take our front-end, and redesign the lower pieces and it should work just as well (if not better)</li>
<li><strong>Easy setup and deployment</strong>.  One of the nice parts of an SPA is that all of the logic and external calls are contained in the app running in a user&#8217;s browser.  It only requires a small static server to push the necessary files forward, but the burden of the work falls on the user&#8217;s machine.</li>
</ol>
</dd>
</dl>
</div>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h2>
<p>With all of these considerations in mind, we decided to stick with a SPA design but provide it a sturdy back-end server for managing external API calls and database connections.</p>
<div class="figure align-center">
<img src="_images/KvasirInitialArchitecture_Prototype.svg" /></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The color of the lines is not extremely important, but the idea is that information moves along that path from green, to yellow to red.</p>
</div>
<p>As you can see, the idea is that a user interacts with Kvasir&#8217;s <a class="reference internal" href="frontend.html#kvasirfrontend"><span>front-end component</span></a> (no surprises there) which then communicates with our <a class="reference internal" href="backend.html#kvasirbackend"><span>back-end</span></a> for additional information.</p>
<dl class="docutils">
<dt>Certain actions will fire off commands to the back-end server, which will typically do two tasks in order to complete a user request:</dt>
<dd><ol class="first last arabic simple">
<li>get essential information (such as access tokens) from a database that exists outside of Kvasir</li>
<li>take that information and make WePay API calls to gather more information</li>
</ol>
</dd>
</dl>
<p>After completing those two tasks, the back-end sends the data to the front-end component which formats it and renders it to the user.  This is pretty much the standard approach to any web-based application.  The tricky part is getting that initial information from the database.</p>
<p>In order to achieve this, we came up with this idea of a <a class="reference internal" href="middleware.html#kvasirmiddleware"><span>&#8220;middleware component.&#8221;</span></a>  This is a layer that is provided by a developer trying to use Kvasir that gives Kvasir access to some information that it needs.</p>
<p>This middleware can be provided in any language that the developer chooses, using any structure that they want.  As long as it can receive and send back information in the way that Kvasir expects, the rest is up to the developer.  The information that Kvasir requests may be spread out across three or four tables for one developer, but be completed contained in a single table for another.  This middleware piece allows Kvasir to be apathetic towards a developer&#8217;s underlying database.  This provides us with the necessary flexibility to be able to provide this as a solution to all platforms currently using WePay, not just a handful.</p>
</div>
<div class="section" id="how-to-host-kvasir">
<h2>How to Host Kvasir<a class="headerlink" href="#how-to-host-kvasir" title="Permalink to this headline">¶</a></h2>
<p>The entire architectural model assumes that Kvasir and your middleware are running on your company&#8217;s internal network.  Kvasir does not come with any sort of authentication and there are <em>no plans for it</em>.  Similarly to database configurations, there are a plethora of authentication systems out there that we cannot provide mechanisms to interact with all of them.</p>
<p>You should launch Kvasir on a system that is only accessible to your employees and not the greater Internet.  Otherwise, you will be exposing your database, and all of the information about your end users to an unintended audience.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="frontend.html" class="btn btn-neutral float-right" title="The Front End: ReactJS and Redux" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to Kvasir’s documentation!" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Giovanni Briggs.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>